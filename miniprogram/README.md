# 智能考勤小程序 - 微信小程序端

一个基于人脸识别和地理位置定位的智能考勤微信小程序，让员工轻松完成日常打卡和考勤管理。

## 📱 功能特色

### 🔐 用户认证
- 手机号登录/注册
- 自动登录状态保持
- 安全的身份验证机制

### 📍 智能打卡
- **人脸识别打卡** - 使用摄像头进行人脸验证
- **位置验证** - GPS定位确保在指定范围内打卡
- **实时检测** - 自动检测人脸并显示识别框
- **签到/签退** - 支持上下班双向打卡
- **状态显示** - 实时显示考勤状态（正常/迟到/早退等）

### 📅 考勤管理
- **日历视图** - 直观查看月度考勤情况
- **考勤记录** - 详细的打卡历史记录
- **状态统计** - 实时显示今日考勤状态
- **时间显示** - 精确的当前时间和打卡时间

### 👤 个人中心
- **个人信息** - 查看和管理个人资料
- **头像显示** - 显示已注册的人脸照片
- **人脸更新** - 申请更新人脸照片（需管理员审核）
- **部门信息** - 查看所属部门和考勤规则

## 🚀 使用指南

### 首次使用

1. **登录注册**
   - 使用手机号和密码登录
   - 新用户需要先注册账号

2. **人脸注册**
   - 进入个人中心
   - 上传清晰的人脸照片
   - 等待管理员审核通过

3. **位置权限**
   - 允许小程序获取位置信息
   - 确保GPS定位功能开启

### 日常打卡

1. **打开小程序**
   - 进入"打卡"页面（首页）
   - 查看当前时间和位置信息

2. **位置检查**
   - 确认在公司指定范围内
   - 绿色圆圈表示可打卡区域
   - 红色提示表示距离超出范围

3. **人脸打卡**
   - 点击"人脸签到"或"人脸签退"
   - 对准摄像头进行人脸识别
   - 等待验证成功完成打卡

4. **查看结果**
   - 打卡成功后显示状态
   - 可查看具体打卡时间和地点

### 查看记录

1. **日历查看**
   - 点击底部"日历"标签
   - 查看月度考勤情况
   - 不同颜色表示不同状态

2. **历史记录**
   - 点击底部"记录"标签
   - 查看详细的打卡历史
   - 支持按日期筛选

3. **个人信息**
   - 点击底部"我的"标签
   - 查看个人资料和今日状态
   - 管理人脸照片

## 🛠 开发配置

### 开发环境要求

- **微信开发者工具** - 最新稳定版
- **小程序基础库** - 3.8.10 或更高版本
- **Node.js** - 用于构建工具（可选）

### 项目配置

1. **导入项目**
   ```bash
   # 使用微信开发者工具导入项目
   # 项目路径：miniprogram/
   ```

2. **配置AppID**
   ```json
   // project.config.json
   {
     "appid": "你的小程序AppID"
   }
   ```

3. **配置后端地址**
   ```javascript
   // app.js
   globalData: {
     baseUrl: 'http://你的后端地址:5000'
   }
   ```

### 权限配置

小程序需要以下权限：

```json
{
  "permission": {
    "scope.userLocation": {
      "desc": "用于记录打卡位置，确保您在指定范围内进行考勤打卡"
    },
    "scope.camera": {
      "desc": "用于人脸识别打卡，验证您的身份"
    }
  }
}
```

## 📁 项目结构

```
miniprogram/
├── app.js                     # 小程序入口文件
├── app.json                   # 全局配置文件
├── project.config.json        # 项目配置文件
├── images/                    # 图标资源
│   ├── attendance.png         # 打卡图标
│   ├── calendar.png           # 日历图标
│   ├── history.png            # 记录图标
│   └── profile.png            # 个人图标
└── pages/                     # 页面目录
    ├── login/                 # 登录页面
    ├── attendance/            # 打卡页面（首页）
    ├── calendar/              # 日历页面
    ├── attendance-history/    # 考勤记录页面
    ├── profile/               # 个人中心页面
    ├── department/            # 部门管理页面
    └── forgot-password/       # 忘记密码页面
```

## 🎨 界面说明

### 底部导航栏

| 图标 | 名称 | 功能 |
|------|------|------|
| 📍 | 打卡 | 主要的考勤打卡功能 |
| 📅 | 日历 | 月度考勤日历视图 |
| 📝 | 记录 | 详细的考勤历史记录 |
| 👤 | 我的 | 个人信息和设置 |

### 打卡页面功能

- **实时时间显示** - 当前日期和时间
- **用户信息显示** - 姓名和部门
- **位置状态** - 当前位置和可打卡范围
- **地图视图** - 可视化显示打卡范围
- **人脸打卡按钮** - 签到/签退操作
- **今日状态** - 显示当日考勤情况

## 📋 使用注意事项

### 打卡要求

1. **位置要求**
   - 必须在公司指定范围内（通常100米）
   - 需要开启GPS定位功能
   - 室内可能需要连接WiFi提高定位精度

2. **人脸识别要求**
   - 光线充足的环境
   - 正面面对摄像头
   - 摘掉帽子、墨镜等遮挡物
   - 保持面部清晰可见

3. **时间规则**
   - 签到时间：09:00前为正常，09:30前为迟到
   - 签退时间：18:00后为正常，17:30前为早退
   - 具体时间以部门设置为准

### 常见问题

1. **定位不准确**
   - 检查GPS权限是否开启
   - 尝试在室外空旷地区使用
   - 连接稳定的WiFi网络

2. **人脸识别失败**
   - 确保光线充足
   - 调整手机角度和距离
   - 检查是否已注册人脸照片

3. **打卡按钮无法点击**
   - 检查是否在打卡范围内
   - 确认已完成人脸注册
   - 等待页面数据加载完成

## 🔧 技术特性

- **原生小程序开发** - 流畅的用户体验
- **实时人脸识别** - 本地检测 + 服务器验证
- **精确位置定位** - GPS + 地图显示
- **离线数据缓存** - 提升加载速度
- **响应式设计** - 适配不同屏幕尺寸

## 📈 性能优化

- 图片懒加载和压缩
- 数据本地缓存
- 网络请求防抖
- 页面预加载
- 组件复用

## 🔄 版本更新

### 更新方式
1. 小程序会自动检查更新
2. 发现新版本会提示用户重启
3. 支持强制更新重要功能

### 更新内容
- 新功能介绍会在更新后显示
- 重要变更会有系统通知
- 可在个人中心查看版本信息

---

**提示**: 如果遇到问题，请联系管理员或查看帮助文档。 
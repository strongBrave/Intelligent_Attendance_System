<view class="profile-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card">
    <view class="user-avatar">
      <image wx:if="{{avatarUrl}}" class="avatar-image" src="{{avatarUrl}}" mode="aspectFill" binderror="onAvatarError" bindload="onAvatarLoad"></image>
      <view wx:else class="avatar-placeholder">
        <text class="avatar-text">{{userInfo.name ? userInfo.name.charAt(0) : 'U'}}</text>
      </view>
    </view>
    <view class="user-info">
      <text class="user-name">{{userInfo.name}}</text>
      <text class="user-phone">{{userInfo.phone}}</text>
      <text class="user-department">{{userInfo.department ? userInfo.department.name : 'æœªåˆ†é…éƒ¨é—¨'}}</text>
    </view>
  </view>



  <!-- åŠŸèƒ½èœå• -->
  <view class="menu-section">
    <view class="menu-group">
      <!-- ç®¡ç†å‘˜åŠŸèƒ½ï¼šéƒ¨é—¨ç®¡ç† -->
      <view class="menu-item" bindtap="goToDepartmentManagement" wx:if="{{userInfo.role === 'admin'}}">
        <view class="menu-icon department-icon">
          <text class="icon-text">ğŸ¢</text>
        </view>
        <view class="menu-content">
          <text class="menu-title">éƒ¨é—¨ç®¡ç†</text>
          <text class="menu-subtitle">ç®¡ç†éƒ¨é—¨è®¾ç½®</text>
        </view>
        <view class="menu-arrow">
          <text class="arrow-text">â€º</text>
        </view>
      </view>
      
      <view class="menu-item" bindtap="goToAttendanceHistory">
        <view class="menu-icon history-icon">
          <text class="icon-text">ğŸ“Š</text>
        </view>
        <view class="menu-content">
          <text class="menu-title">è€ƒå‹¤è®°å½•</text>
          <text class="menu-subtitle">æŸ¥çœ‹å†å²è€ƒå‹¤</text>
        </view>
        <view class="menu-arrow">
          <text class="arrow-text">â€º</text>
        </view>
      </view>
      
      <view class="menu-item" bindtap="goToSettings">
        <view class="menu-icon settings-icon">
          <text class="icon-text">âš™ï¸</text>
        </view>
        <view class="menu-content">
          <text class="menu-title">è®¾ç½®</text>
          <text class="menu-subtitle">åº”ç”¨è®¾ç½®</text>
        </view>
        <view class="menu-arrow">
          <text class="arrow-text">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ä»Šæ—¥è€ƒå‹¤çŠ¶æ€ -->
  <view class="today-status-section">
    <view class="section-header">
      <text class="section-title">ä»Šæ—¥è€ƒå‹¤</text>
    </view>
    <view class="status-content">
      <view class="status-item" wx:if="{{todayStatus.sign_in}}">
        <view class="status-icon signin-icon">
          <text class="icon-text">âœ“</text>
        </view>
        <view class="status-info">
          <text class="status-label">ç­¾åˆ°æ—¶é—´</text>
          <text class="status-time">{{todayStatus.sign_in}}</text>
        </view>
        <view class="status-badge {{todayStatus.sign_in_status}}">
          <text class="badge-text">{{getStatusText(todayStatus.sign_in_status)}}</text>
        </view>
      </view>
      
      <view class="status-item" wx:if="{{todayStatus.sign_out}}">
        <view class="status-icon signout-icon">
          <text class="icon-text">â†©</text>
        </view>
        <view class="status-info">
          <text class="status-label">ç­¾é€€æ—¶é—´</text>
          <text class="status-time">{{todayStatus.sign_out}}</text>
        </view>
        <view class="status-badge {{todayStatus.sign_out_status}}">
          <text class="badge-text">{{getStatusText(todayStatus.sign_out_status)}}</text>
        </view>
      </view>
      
      <view class="status-item" wx:if="{{!todayStatus.sign_in && !todayStatus.sign_out}}">
        <view class="status-icon absent-icon">
          <text class="icon-text">âœ—</text>
        </view>
        <view class="status-info">
          <text class="status-label">ä»Šæ—¥çŠ¶æ€</text>
          <text class="status-time">æœªæ‰“å¡</text>
        </view>
        <view class="status-badge absent">
          <text class="badge-text">ç¼ºå‹¤</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¿«æ·æ“ä½œ -->
  <view class="quick-actions">
    <view class="action-item" bindtap="goToAttendance">
      <view class="action-icon">
        <text class="icon-text">ğŸ“±</text>
      </view>
      <text class="action-text">å»æ‰“å¡</text>
    </view>
    
    <view class="action-item" bindtap="goToCalendar">
      <view class="action-icon">
        <text class="icon-text">ğŸ“…</text>
      </view>
      <text class="action-text">è€ƒå‹¤æ—¥å†</text>
    </view>
    
    <view class="action-item" bindtap="goToStats">
      <view class="action-icon">
        <text class="icon-text">ğŸ“ˆ</text>
      </view>
      <text class="action-text">è€ƒå‹¤ç»Ÿè®¡</text>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œ -->
  <view class="bottom-actions">
    <button class="logout-btn" bindtap="logout">
      <text class="btn-text">é€€å‡ºç™»å½•</text>
    </button>
  </view>
</view> 